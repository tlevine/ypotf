digraph ypotf {
    rankdir=LR

    subgraph cluster_0 {
      label="Requires confirmation";
      subscribe, unsubscribe, message, "Error message" [shape=note];

      subscribe -> "Error message" [label="Already a member"];
      subscribe -> "Subscription confirmation" -> confirm;

      unsubscribe -> "Error message" [label="Not a member"];
      subscribe -> "Unsubscription confirmation" -> confirm;

      confirm -> "Process the request, finally.";
      "Process the request, finally." [shape=diamond];

      message -> "Message confirmation" -> confirm;
    }

    archive, help, "Forward old emails", "Send documentation" [shape=note];
    subgraph cluster_1 {
      label="Simple reply";
      archive -> "Forward old emails";
      help -> "Send documentation";
    }
}
